(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{100:function(e,t,n){e.exports={container:"main-container_container__zxfwV"}},103:function(e,t,n){e.exports={container:"burger-constructor-item_container__zT06j",item:"burger-constructor-item_item__3ZkuA"}},185:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(31),s=n.n(a),i=n(74),o=n.n(i),u=n(8),d=n(4),l=n(6),j=n(44),b=n.n(j),m=n(75),p=n.n(m),O=n(0),f=function(e){var t=e.title,n=e.Icon,r=e.path,c=Object(u.j)(r),a=(null===c||void 0===c?void 0:c.isExact)?"primary":"secondary",s="pl-5 pr-5",i="ml-2 text text_type_main-medium";return Object(O.jsx)("li",{className:s,children:Object(O.jsxs)(l.c,{exact:!0,to:r,className:"".concat(i," ").concat(p.a.link),activeClassName:p.a.link_active,children:[Object(O.jsx)(n,{type:a}),t]})})},_=Object(r.memo)(f),x=[{title:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440",Icon:d.BurgerIcon,path:"/"},{title:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432",Icon:d.ListIcon,path:"/feed"},{title:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442",Icon:d.ProfileIcon,path:"/profile"}],h=function(){return Object(O.jsx)("header",{className:"".concat(b.a.container," p-4"),children:Object(O.jsx)("nav",{className:b.a.navigation,children:Object(O.jsxs)("ul",{className:b.a.list,children:[Object(O.jsx)("li",{className:b.a.logo,children:Object(O.jsx)(l.c,{to:"/",children:Object(O.jsx)(d.Logo,{})})}),x.map((function(e,t){return Object(O.jsx)(_,{title:e.title,Icon:e.Icon,path:e.path},t)}))]})})})},g=c.a.memo(h),v=n(32),y=n(2),N=n(11),S=n(28),E=n.n(S),k=function(e){var t,n,c=e.type,a=e.submitCallback,s={name:"",email:""};switch(c){case"login":n="\u0412\u0445\u043e\u0434",s={email:"",password:""},t="\u0412\u043e\u0439\u0442\u0438";break;case"register":n="\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",s={name:"",email:"",password:""},t="\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f";break;case"forgot":n="\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",s={email:""},t="\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c";break;case"reset":n="\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",s={password:"",token:""},t="\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}var i=Object(r.useState)(Object(y.a)({},s)),o=Object(N.a)(i,2),u=o[0],j=o[1],b=function(e){j(Object(y.a)(Object(y.a)({},u),{},Object(v.a)({},e.target.name,e.target.value)))},m=Object(r.useMemo)((function(){switch(c){case"login":return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("p",{className:"text text_type_main-default text_color_inactive mb-6",children:["\u0412\u044b \u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?"," ",Object(O.jsx)(l.b,{to:"/register",className:"text text_type_main-default ".concat(E.a.link),children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(O.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"," ",Object(O.jsx)(l.b,{to:"/forgot-password",className:"text text_type_main-default ".concat(E.a.link),children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u043b\u044c"})]})]});case"register":return Object(O.jsxs)("p",{className:"text text_type_main-default text_color_inactive mb-6",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"," ",Object(O.jsx)(l.b,{to:"/login",className:"text text_type_main-default ".concat(E.a.link),children:"\u0412\u043e\u0439\u0442\u0438"})]});case"forgot":case"reset":return Object(O.jsxs)("p",{className:"text text_type_main-default text_color_inactive mb-6",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"," ",Object(O.jsx)(l.b,{to:"/login",className:"text text_type_main-default ".concat(E.a.link),children:"\u0412\u043e\u0439\u0442\u0438"})]})}}),[c]);return Object(O.jsxs)("section",{className:E.a.container,children:[Object(O.jsx)("h2",{className:"text text_type_main-medium mb-6",children:n}),Object(O.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a&&a(u)},className:E.a.form,children:["name"in u&&void 0!==u.name&&Object(O.jsx)(d.Input,{value:u.name,name:"name",onChange:b,placeholder:"\u0418\u043c\u044f"}),"email"in u&&void 0!==u.email&&Object(O.jsx)(d.EmailInput,{value:u.email,name:"email",onChange:b}),"password"in u&&void 0!==u&&Object(O.jsx)(d.PasswordInput,{value:u.password,name:"password",onChange:b}),"token"in u&&void 0!==u&&Object(O.jsx)(d.Input,{value:u.token,name:"token",onChange:b,placeholder:"\u041a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430"}),Object(O.jsx)(d.Button,{type:"primary",size:"medium",children:t})]}),m]})},I=c.a.memo(k),w=n(9),R=n.n(w),C=n(19),T="https://norma.nomoreparties.space/api";function P(e,t,n){(n=Object(y.a)({path:"/"},n)).expires instanceof Date&&(n.expires=n.expires.toUTCString());var r=encodeURIComponent(e)+"="+encodeURIComponent(t);for(var c in n){r+="; "+c;var a=n[c];!0!==a&&(r+="="+a)}document.cookie=r}function U(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()[\]\\/+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function D(){return localStorage.getItem("token")}function A(e,t){P("token",e=e.split("Bearer ")[1]),localStorage.setItem("token",t)}function F(){P("token","",{"max-age":-1}),localStorage.removeItem("token")}var L=function(){var e=Object(C.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(T,"/ingredients"));case 2:if(!(t=e.sent).ok){e.next=9;break}return e.next=6,t.json();case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,Promise.reject(t);case 11:e.t0=e.sent;case 12:return e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(C.a)(R.a.mark((function e(t){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(T,"/orders"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer "+U("token")},body:JSON.stringify(t)});case 2:if(!(n=e.sent).ok){e.next=9;break}return e.next=6,n.json();case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,Promise.reject(n);case 11:e.t0=e.sent;case 12:return e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(C.a)(R.a.mark((function e(t){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(T,"/password-reset"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)});case 2:if(!(n=e.sent).ok){e.next=9;break}return e.next=6,n.json();case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,Promise.reject(n);case 11:e.t0=e.sent;case 12:return e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(C.a)(R.a.mark((function e(t){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(T,"/password-reset/reset"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)});case 2:if(!(n=e.sent).ok){e.next=9;break}return e.next=6,n.json();case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,Promise.reject(n);case 11:e.t0=e.sent;case 12:return e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(C.a)(R.a.mark((function e(t){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(T,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)});case 2:if(!(n=e.sent).ok){e.next=9;break}return e.next=6,n.json();case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,Promise.reject(n);case 11:e.t0=e.sent;case 12:return e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(C.a)(R.a.mark((function e(t){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(T,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)});case 2:if(!(n=e.sent).ok){e.next=9;break}return e.next=6,n.json();case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,Promise.reject(n);case 11:e.t0=e.sent;case 12:return e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(C.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(T,"/auth/user"),{headers:{Authorization:"Bearer "+U("token")}});case 2:if(!(t=e.sent).ok){e.next=9;break}return e.next=6,t.json();case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,Promise.reject(t);case 11:e.t0=e.sent;case 12:return e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(C.a)(R.a.mark((function e(t){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(T,"/auth/user"),{method:"PATCH",body:JSON.stringify(t),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer "+U("token")}});case 2:if(!(n=e.sent).ok){e.next=9;break}return e.next=6,n.json();case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,Promise.reject(n);case 11:e.t0=e.sent;case 12:return e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(C.a)(R.a.mark((function e(t){var n,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={token:t},e.next=3,fetch("".concat(T,"/auth/token"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(n)});case 3:if(!(r=e.sent).ok){e.next=10;break}return e.next=7,r.json();case 7:e.t0=e.sent,e.next=13;break;case 10:return e.next=12,Promise.reject(r);case 12:e.t0=e.sent;case 13:return e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(C.a)(R.a.mark((function e(){var t,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={token:D()},e.next=3,fetch("".concat(T,"/auth/logout"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)});case 3:if(!(n=e.sent).ok){e.next=10;break}return e.next=7,n.json();case 7:e.t0=e.sent,e.next=13;break;case 10:return e.next=12,Promise.reject(n);case 12:e.t0=e.sent;case 13:return e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X="REGISTER_USER_REQUEST",V="REGISTER_USER_SUCCESS",K="REGISTER_USER_FAILED",Z="LOGIN_USER_REQUEST",Y="LOGIN_USER_SUCCESS",$="LOGIN_USER_FAILED",ee="LOGOUT_USER_REQUEST",te="LOGOUT_USER_SUCCESS",ne="LOGOUT_USER_FAILED",re="RESET_PASSWORD_REQUEST",ce="RESET_PASSWORD_SUCCESS",ae="RESET_PASSWORD_FAILED",se="RESET_PASSWORD_CLEAR",ie="UPDATE_PASSWORD_REQUEST",oe="UPDATE_PASSWORD_SUCCESS",ue="UPDATE_PASSWORD_FAILED",de="UPDATE_PASSWORD_CLEAR",le="UPDATE_USER_REQUEST",je="UPDATE_USER_SUCCESS",be="UPDATE_USER_FAILED",me=function(){return{type:Z}},pe=function(e){return{type:Y,user:e}},Oe=function(){return{type:$}},fe=function(){return{type:be}},_e=function(e){return function(t){t({type:re}),M(e).then((function(e){console.log("reset password request res: ",e),t({type:ce})})).catch((function(e){console.log("reset password request err: ",e),t({type:ae})})).finally((function(){console.log("reset pass finally..."),t({type:se})}))}},xe=function(e){return function(t){t({type:ie}),G(e).then((function(e){console.log("confirm password reset res: ",e),t({type:oe})})).catch((function(e){console.log("confirm password reset err: ",e),t({type:ue})})).finally((function(){console.log("update pass finally..."),t({type:de})}))}},he=function(e){return function(t){t({type:X}),W(e).then((function(e){console.log("user register res: ",e);var n=e.user,r=e.accessToken,c=e.refreshToken;t(function(e){return{type:V,user:e}}(n)),A(r,c)})).catch((function(e){console.log("user register res: ",e),t({type:K})}))}},ge=function e(){return function(t){t(me()),z().then((function(e){console.log("check user method res:",e),t(pe(e.user))})).catch((function(n){if(console.log("check user method err 1:",n),403===n.status){var r=D();J(r).then((function(n){console.log("refresh token method res:",n),A(n.accessToken,n.refreshToken),t(e())})).catch((function(e){console.log("check user method err 2:",e),t(Oe())}))}else console.log("check user method err 2:",n),t(Oe())}))}},ve=function e(t){return function(n){n({type:le}),H(t).then((function(e){var t;console.log("update user res: ",e),n((t=e.user,{type:je,user:t}))})).catch((function(r){if(console.log("update user err 1: ",r),403===r.status){var c=D();J(c).then((function(r){console.log("refresh token method res:",r),A(r.accessToken,r.refreshToken),n(e(t))})).catch((function(e){console.log("update user err 2: ",e),n(fe())}))}else console.log("update user err 2: ",r),n(fe())}))}},ye=function(){return function(e){e({type:ee}),Q().then((function(t){console.log("logout user method ok: ",t),F(),e({type:te})})).catch((function(t){console.log("logout user method fail: ",t),e({type:ne})}))}},Ne=n(43),Se=Ne.c,Ee=function(){return Object(Ne.b)()},ke=n(78),Ie=n.n(ke),we=function(){return Object(O.jsx)("div",{className:Ie.a.container,children:Object(O.jsx)("div",{className:Ie.a.loader,children:Object(O.jsx)(d.BurgerIcon,{type:"secondary"})})})},Re=function(){var e=Ee(),t=Se((function(e){return e.user})),n=t.currentUser,c=t.userLoginRequest,a=Object(u.h)().state;return Object(r.useEffect)((function(){e(ge())}),[e]),n?Object(O.jsx)(u.a,{to:(null===a||void 0===a?void 0:a.from)||"/"}):c?Object(O.jsx)(we,{}):Object(O.jsx)(I,{type:"login",submitCallback:function(t){e(function(e){return function(t){t(me()),B(e).then((function(e){console.log("user auth res: ",e);var n=e.user,r=e.accessToken,c=e.refreshToken;t(pe(n)),A(r,c)})).catch((function(e){console.log("user auth res: ",e),t(Oe())}))}}(t))}})},Ce=Object(r.memo)(Re),Te=n(20),Pe=n.n(Te),Ue=[{path:"",title:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",type:"navlink"},{path:"/orders",title:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432",type:"navlink"},{title:"\u0412\u044b\u0445\u043e\u0434",type:"button"}],De=n(22),Ae=n(23),Fe=n.n(Ae),Le=function(e){var t,n=e.authorized,r=e.data,c=Object(u.j)().path,a=r.images,s=r.name,i=r.parsedTime,o=r.number,l=r.price,j=r._id,b=r.status,m=Object(u.g)(),p=Object(u.h)();switch(b){case"created":t={color:"white",message:"\u0421\u043e\u0437\u0434\u0430\u043d"};break;case"pending":t={color:"white",message:"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f"};break;case"done":t={color:"#00CCCC",message:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"};break;default:t={message:"\u0421\u043e\u0437\u0434\u0430\u043d"}}return Object(O.jsxs)("div",{className:"".concat(Fe.a.container," p-6"),onClick:function(){m.push("".concat(c,"/").concat(j),{background:p,order:r})},children:[Object(O.jsxs)("div",{className:"".concat(Fe.a.credentials," mb-6"),children:[Object(O.jsxs)("span",{className:"text text_type_digits-default",children:["#",o]}),Object(O.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:i})]}),Object(O.jsx)("p",{className:"text text_type_main-medium mb-6",children:s}),n&&Object(O.jsx)("p",{style:{color:t.color},className:"text text_type_main-default mb-6",children:t.message}),Object(O.jsxs)("div",{className:Fe.a.ingredients,children:[Object(O.jsx)("div",{className:Fe.a.images,children:function(){var e=-50,t=10,n=a.length-5;return a.map((function(r,c){e+=50,t-=1;var a=String(c+e+t);return 0===c?Object(O.jsx)("div",{className:Fe.a.image,style:{backgroundImage:"url(".concat(r,")"),zIndex:t}},a):c<5?Object(O.jsx)("div",{className:Fe.a.image,style:{backgroundImage:"url(".concat(r,")"),position:"absolute",left:"".concat(e,"px"),zIndex:t}},a):5===c?Object(O.jsx)("div",{className:"".concat(Fe.a.image," ").concat(Fe.a.image_excess),style:{backgroundImage:"linear-gradient(rgba(0, 0, 0, 0.527),rgba(0, 0, 0, 0.5)), url(".concat(r,")"),position:"absolute",left:"".concat(e,"px"),zIndex:t},children:Object(O.jsxs)("p",{className:"text text_type_digits-default",children:["+",n]})},a):null}))}()}),Object(O.jsxs)("div",{className:Fe.a.price,children:[Object(O.jsx)("span",{className:"text text_type_digits-default",children:l}),Object(O.jsx)(d.CurrencyIcon,{type:"primary"})]})]})]})},qe=Object(r.memo)(Le);function Me(e){var t=new Date(Date.parse(e)),n=t.getHours()<10?"0"+t.getHours():t.getHours(),r=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),c=t.getTimezoneOffset(),a="+"===c.toString()[0]?"i-GMT\u2013"+Math.abs(c/60):"i-GMT+"+Math.abs(c/60),s=function(e){var t="";switch(e){case 0:t="\u0421\u0435\u0433\u043e\u0434\u043d\u044f";break;case 1:t="\u0412\u0447\u0435\u0440\u0430";break;case 2:t="\u041f\u043e\u0437\u0430\u0432\u0447\u0435\u0440\u0430";break;case 3:case 4:t="".concat(e," \u0434\u043d\u044f \u043d\u0430\u0437\u0430\u0434");break;default:t="".concat(e," \u0434\u043d\u0435\u0439 \u043d\u0430\u0437\u0430\u0434")}return t}(function(e){var t=new Date;return Math.round(Math.abs((t.getTime()-e.getTime())/864e5))}(t));return String(s+", "+n+":"+r+" "+a)}var Ge=function(e,t){return e.map((function(e){var n=Object(y.a)(Object(y.a)({},e),{images:[],price:0,fullIngredients:[],parsedTime:""});return e.ingredients.forEach((function(e){var r=t.find((function(t){return t._id===e}));r&&(n.fullIngredients.push(r),n.images.push(r.image_large),n.price+=r.price,n.parsedTime=Me(n.createdAt))})),n}))},We=n(98),Be=n.n(We),ze=function(e){var t=e.authorized,n=e.data,r=Se((function(e){return e.ingredients})).ingredientsList,c=t?Object(De.a)(n.orders).reverse():n.orders;return Object(O.jsx)("div",{className:Be.a.sections,children:r.length>0&&Ge(c,r).map((function(e){return Object(O.jsx)(qe,{data:e,authorized:t},e._id)}))})},He=Object(r.memo)(ze),Je="WS_CONNECTION_START_AUTH",Qe="WS_CONNECTION_STOP_AUTH",Xe="WS_CONNECTION_SUCCESS_AUTH",Ve="WS_CONNECTION_ERROR_AUTH",Ke="WS_CONNECTION_CLOSED_AUTH",Ze="WS_GET_MESSAGE_AUTH";var Ye=function(){var e=Ee(),t=Se((function(e){return e.wsAuthFeed})).ordersInfo;return Object(r.useEffect)((function(){return e({type:Je}),function(){e({type:Ke})}}),[e]),Object(O.jsx)(O.Fragment,{children:t&&Object(O.jsx)(He,{authorized:!0,data:t})})},$e=function(){var e=Object(u.j)(),t=e.path,n=e.url,c=Se((function(e){return e.user})).currentUser,a=Object(r.useState)({name:(null===c||void 0===c?void 0:c.name)||"",email:(null===c||void 0===c?void 0:c.email)||"",password:""}),s=Object(N.a)(a,2),i=s[0],o=s[1],j=Ee(),b=function(e){o(Object(y.a)(Object(y.a)({},i),{},Object(v.a)({},e.target.name,e.target.value)))},m=Object(r.useCallback)((function(e){e.preventDefault(),c&&o({name:c.name,email:c.email,password:""})}),[c]),p=function(){j(ye())},f=Object(O.jsx)("div",{className:Pe.a.form_container,children:Object(O.jsxs)("form",{className:Pe.a.form,onSubmit:function(e){e.preventDefault(),j(ve(i))},children:[Object(O.jsx)(d.Input,{value:i.name,onChange:b,placeholder:"\u0418\u043c\u044f",name:"name"}),Object(O.jsx)(d.Input,{value:i.email,onChange:b,placeholder:"\u041b\u043e\u0433\u0438\u043d",name:"email"}),Object(O.jsx)(d.PasswordInput,{value:i.password,onChange:b,name:"password"}),Object(O.jsx)(d.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(O.jsx)("div",{onClick:m,children:Object(O.jsx)(d.Button,{type:"secondary",size:"medium",children:"\u041e\u0442\u043c\u0435\u043d\u0430"})})]})});return Object(O.jsxs)("section",{className:Pe.a.container,children:[Object(O.jsxs)("div",{className:Pe.a.menu,children:[Object(O.jsx)("nav",{className:Pe.a.navigation,children:Object(O.jsx)("ul",{className:Pe.a.list,children:Ue.map((function(e,t){return Object(O.jsx)("li",{className:Pe.a.list_item,children:"navlink"===e.type?Object(O.jsx)(l.c,{exact:!0,to:"".concat(n).concat(e.path),className:"".concat(Pe.a.link," text text_type_main-medium text_color_inactive"),activeClassName:Pe.a.link_active,children:e.title}):Object(O.jsx)("button",{onClick:p,className:"".concat(Pe.a.link," text text_type_main-medium text_color_inactive"),children:e.title})},t)}))})}),Object(O.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]}),Object(O.jsxs)(u.d,{children:[Object(O.jsx)(u.b,{exact:!0,path:t,children:c&&f}),Object(O.jsx)(u.b,{exact:!0,path:"".concat(t,"/123"),children:Object(O.jsx)("div",{children:"123"})}),Object(O.jsx)(u.b,{exact:!0,path:"".concat(t,"/orders"),children:Object(O.jsx)(Ye,{})})]})]})},et=Object(r.memo)($e),tt=function(){var e=Ee(),t=Se((function(e){return e.user})),n=t.currentUser,c=t.userLoginRequest,a=Object(u.h)().state;return Object(r.useEffect)((function(){e(ge())}),[e]),n?Object(O.jsx)(u.a,{to:(null===a||void 0===a?void 0:a.from)||"/"}):c?null:Object(O.jsx)(I,{type:"register",submitCallback:function(t){e(he(t))}})},nt=Object(r.memo)(tt),rt=function(){var e=Ee(),t=Se((function(e){return e.user})),n=t.currentUser,c=t.resetPasswordSuccess,a=t.userLoginRequest,s=Object(u.h)().state;Object(r.useEffect)((function(){e(ge())}),[e]);var i=Object(r.useCallback)((function(t){e(_e(t))}),[e]);return n?Object(O.jsx)(u.a,{to:(null===s||void 0===s?void 0:s.from)||"/"}):a?Object(O.jsx)(we,{}):c?Object(O.jsx)(u.a,{to:{pathname:"/reset-password",state:{referrer:"forgot-password"}}}):Object(O.jsx)(I,{type:"forgot",submitCallback:i})},ct=Object(r.memo)(rt),at=function(){var e=Object(u.g)(),t=Ee(),n=Se((function(e){return e.user})),c=n.updatePasswordSuccess,a=n.currentUser,s=n.userLoginRequest,i=Object(u.h)().state,o=Object(r.useCallback)((function(e){t(xe(e))}),[t]);return Object(r.useEffect)((function(){t(ge())}),[t]),a?Object(O.jsx)(u.a,{to:(null===i||void 0===i?void 0:i.from)||"/"}):"forgot-password"!==(null===i||void 0===i?void 0:i.referrer)||"POP"===e.action?Object(O.jsx)(u.a,{to:(null===i||void 0===i?void 0:i.from)||"/login"}):s?Object(O.jsx)(we,{}):c?Object(O.jsx)(u.a,{to:"/login"}):Object(O.jsx)(I,{type:"reset",submitCallback:o})},st=Object(r.memo)(at);var it=function(){return Object(O.jsx)("div",{children:"not found page"})},ot=n(54),ut=["children"],dt=function(e){var t=e.children,n=Object(ot.a)(e,ut),c=Se((function(e){return e.user})).currentUser,a=Ee();return Object(r.useEffect)((function(){a(ge())}),[a]),Object(O.jsx)(u.b,Object(y.a)(Object(y.a)({},n),{},{render:function(e){var n=e.location;return c?t:Object(O.jsx)(u.a,{to:{pathname:"/login",state:{from:n}}})}}))},lt=Object(r.memo)(dt),jt=n(26),bt=n.n(jt),mt=n(33),pt=n.n(mt),Ot=function(e){if(!e.ingredient)return null;var t=e.ingredient,n=t.image,r=t.name,c=t.calories,a=t.carbohydrates,s=t.fat,i=t.proteins;return Object(O.jsxs)("div",{className:bt.a.details,children:[Object(O.jsx)("img",{src:n,alt:r,className:bt.a.image}),Object(O.jsx)("p",{className:"text text_type_main-medium mb-8 ".concat(bt.a.subtitle),children:r}),Object(O.jsxs)("div",{className:pt.a.nutrients,children:[Object(O.jsxs)("p",{className:"text text_type_main-medium ".concat(bt.a.text," text_color_inactive"),children:["\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b",Object(O.jsx)("br",{}),c]}),Object(O.jsxs)("p",{className:"text text_type_main-medium ".concat(bt.a.text," text_color_inactive"),children:["\u0411\u0435\u043b\u043a\u0438, \u0433",Object(O.jsx)("br",{}),i]}),Object(O.jsxs)("p",{className:"text text_type_main-medium ".concat(bt.a.text," text_color_inactive"),children:["\u0416\u0438\u0440\u044b, \u0433",Object(O.jsx)("br",{}),s]}),Object(O.jsxs)("p",{className:"text text_type_main-medium ".concat(bt.a.text," text_color_inactive"),children:["\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433",Object(O.jsx)("br",{}),a]})]})]})},ft=Object(r.memo)(Ot),_t=function(){var e=Se((function(e){return e.ingredients})),t=e.ingredientsList,n=e.ingredientsRequest,r=e.ingredientsFailed,c=Object(u.i)().ingredientId,a=null;if(!(t.length>0))return Object(O.jsx)(we,{});a=t.find((function(e){return e._id===c}));var s=t.length>0&&!n&&!r;return Object(O.jsx)(O.Fragment,{children:s&&a?Object(O.jsx)("div",{className:"mt-20",children:Object(O.jsx)(ft,{ingredient:a})}):Object(O.jsx)(it,{})})},xt=Object(r.memo)(_t),ht=n(99),gt=n.n(ht),vt=function(e){var t=e.onClose;return Object(O.jsx)("div",{className:gt.a.container,onClick:t})},yt=function(e){var t=e.slim,n=e.headingType,c=e.heading,a=e.handleClose,i=e.children,o=document.getElementById("app"),l=Object(u.g)(),j=a||l.goBack,b=function(e){"Escape"===e.key&&j()};Object(r.useEffect)((function(){return document.addEventListener("keydown",b),function(){document.removeEventListener("keydown",b)}}),[]);return o?s.a.createPortal(Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"".concat(pt.a.container," p-10"),style:{width:"".concat(t?"640px":"720px")},children:[function(){var e="digits"===n?"text_type_digits-default":"text_type_main-medium";return Object(O.jsxs)("div",{className:pt.a.header,children:[Object(O.jsx)("p",{className:"".concat(pt.a.heading," text ").concat(e),children:c}),Object(O.jsx)(d.CloseIcon,{type:"primary",onClick:j})]})}(),i]}),Object(O.jsx)(vt,{onClose:j})]}),o):null},Nt=Object(r.memo)(yt),St="GET_INGREDIENTS_REQUEST",Et="GET_INGREDIENTS_SUCCESS",kt="GET_INGREDIENTS_FAILED",It="ADD_CURRENT_INGREDIENT",wt="DELETE_CURRENT_INGREDIENT",Rt=function(){return function(e){e({type:St}),L().then((function(t){var n;e((n=t.data,{type:Et,data:n}))})).catch((function(){e({type:kt})}))}},Ct="WS_CONNECTION_START",Tt="WS_CONNECTION_STOP",Pt="WS_CONNECTION_SUCCESS",Ut="WS_CONNECTION_ERROR",Dt="WS_CONNECTION_CLOSED",At="WS_GET_MESSAGE",Ft=n(100),Lt=n.n(Ft),qt=function(e){var t=e.className,n=e.title,r=e.children;return Object(O.jsxs)("div",{className:t,children:[n&&Object(O.jsx)("h2",{className:"pt-10 mb-5 text text_type_main-large",children:n}),Object(O.jsx)("section",{className:Lt.a.container,children:r})]})},Mt=Object(r.memo)(qt),Gt=n(34),Wt=n.n(Gt),Bt=function(e){var t=e.data,n=t.total,r=t.totalToday,c=t.orders,a=c.filter((function(e){return"done"===e.status})),s=c.filter((function(e){return"pending"===e.status}));return Object(O.jsxs)("div",{children:[Object(O.jsxs)(Mt,{className:"mb-15",children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("h3",{className:"mb-6 text text_type_main-medium",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(O.jsx)("ul",{className:Wt.a.list,children:a.map((function(e){return Object(O.jsx)("li",{children:Object(O.jsx)("span",{className:"".concat(Wt.a.ready," text text_type_digits-default"),children:e.number})},String(e.number))}))})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("h3",{className:"mb-6 text text_type_main-medium",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(O.jsx)("ul",{className:Wt.a.list,children:s.map((function(e){return Object(O.jsx)("li",{children:Object(O.jsx)("span",{className:"text text_type_digits-default",children:e.number})},String(e.number))}))})]})]}),Object(O.jsxs)("div",{className:"mb-15",children:[Object(O.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(O.jsx)("p",{className:"".concat(Wt.a.glow," text text_type_digits-large"),children:n})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(O.jsx)("p",{className:"".concat(Wt.a.glow," text text_type_digits-large"),children:r})]})]})},zt=Object(r.memo)(Bt),Ht=function(){var e=Ee(),t=Se((function(e){return e.wsFeed})).ordersInfo;return Object(r.useEffect)((function(){return e({type:Ct}),function(){e({type:Tt})}}),[e]),Object(O.jsx)(O.Fragment,{children:t&&Object(O.jsxs)(Mt,{title:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432",children:[Object(O.jsx)(He,{data:t}),Object(O.jsx)(zt,{data:t})]})})},Jt=Object(r.memo)(Ht),Qt=n(105),Xt=n(190),Vt=n(55),Kt=n.n(Vt),Zt=n(191),Yt=n(45),$t=n.n(Yt),en=function(e){var t=e.count,n=e.data,r=e.data,c=r.image,a=r.name,s=r.price,i=e.onShowDetails,o=Object(Zt.a)({type:"ingredient",item:Object(y.a)({},n),collect:function(e){return{isDrag:e.isDragging()}}}),u=Object(N.a)(o,2)[1];return Object(O.jsxs)("div",{className:"".concat($t.a.container," pl-4 pr-4"),onClick:function(){return i(n)},ref:u,children:[t>0&&Object(O.jsx)("div",{className:$t.a.counter,children:Object(O.jsx)(d.Counter,{count:t,size:"default"})}),Object(O.jsx)("img",{src:c,alt:a,className:"mb-1"}),Object(O.jsxs)("div",{className:"".concat($t.a.price," mb-1"),children:[Object(O.jsx)("p",{className:"mr-2 text text_type_digits-default",children:s}),Object(O.jsx)(d.CurrencyIcon,{type:"primary"})]}),Object(O.jsx)("p",{className:"".concat($t.a.title," text text_type_main-medium"),children:a})]})},tn=Object(r.memo)(en),nn={bun:"\u0411\u0443\u043b\u043a\u0438",main:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",sauce:"\u0421\u043e\u0443\u0441\u044b"},rn=function(){var e=Object(r.useState)("\u0411\u0443\u043b\u043a\u0438"),t=Object(N.a)(e,2),n=t[0],c=t[1],a=Object(r.useRef)(null),s=Object(r.useRef)({}),i=Se((function(e){return e.ingredients})),o=i.ingredientsRequest,l=i.ingredientsFailed,j=i.ingredientsList,b=Se((function(e){return e.burger})).constructorItems,m=Ee(),p=Object(u.g)(),f=Object(u.h)(),_=function(e){c(e);var t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})},x=function(e){m({type:It,ingredient:e}),p.push("/ingredients/".concat(e._id),{background:f,ingredient:e})},h=function(e){var t=j.filter((function(t){return t.type===e})).map((function(e){var t=b.filter((function(t){return t._id===e._id})).length;return Object(O.jsx)(tn,{data:e,onShowDetails:function(){return x(e)},count:t},e._id)})),n=nn[e];return Object(O.jsxs)("div",{id:n,ref:function(e){e&&(s.current[n]=e)},children:[Object(O.jsx)("h3",{className:"text text_type_main-medium mb-6",children:n}),Object(O.jsx)("div",{className:"".concat(Kt.a.items," mb-10 pl-4 pr-4"),children:t})]})};return Object(O.jsxs)("div",{children:[Object(O.jsxs)("ul",{className:"".concat(Kt.a.tabs," mb-10"),children:[Object(O.jsx)("li",{children:Object(O.jsx)(d.Tab,{value:"\u0411\u0443\u043b\u043a\u0438",active:"\u0411\u0443\u043b\u043a\u0438"===n,onClick:function(){return _("\u0411\u0443\u043b\u043a\u0438")},children:"\u0411\u0443\u043b\u043a\u0438"})}),Object(O.jsx)("li",{children:Object(O.jsx)(d.Tab,{value:"\u0421\u043e\u0443\u0441\u044b",active:"\u0421\u043e\u0443\u0441\u044b"===n,onClick:function(){return _("\u0421\u043e\u0443\u0441\u044b")},children:"\u0421\u043e\u0443\u0441\u044b"})}),Object(O.jsx)("li",{children:Object(O.jsx)(d.Tab,{value:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",active:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"===n,onClick:function(){return _("\u041d\u0430\u0447\u0438\u043d\u043a\u0438")},children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})})]}),!o&&j.length>0&&Object(O.jsxs)("div",{className:Kt.a.sections,ref:a,onScroll:function(){if(a&&a.current){var e=a.current.getBoundingClientRect().top,t=Number.POSITIVE_INFINITY,n="";Object.keys(s.current).forEach((function(r){var c=s.current[r].getBoundingClientRect().top,a=Math.abs(c-e);a<t&&(t=a,n=r)})),c(n)}},children:[h("bun"),h("sauce"),h("main")]}),l&&Object(O.jsx)("p",{children:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :("})]})},cn=Object(r.memo)(rn),an=n(192),sn=n(102),on=n.n(sn),un=n(103),dn=n.n(un),ln="ADD_INGREDIENT",jn="DELETE_INGREDIENT",bn="REWRITE_INGREDIENTS",mn=function(e){var t=e.moveItem,n=e.index,c=e.data,a=c.image,s=c.name,i=c.price,o=c._id,u=e.headItem,l=e.tailItem,j=Object(r.useRef)(null),b=u?"top":l?"bottom":void 0,m=u?"".concat(s," (\u0432\u0435\u0440\u0445)"):l?"".concat(s," (\u043d\u0438\u0437)"):s,p=!(u||l),f=u||l?"ml-8 pl-4 pr-4":"pl-4 pr-4",_=Ee(),x=Object(an.a)({accept:"constructor-item",collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,r){var c;if(j.current){var a=e.index,s=n;if(a!==s){var i=null===(c=j.current)||void 0===c?void 0:c.getBoundingClientRect(),o=(i.bottom-i.top)/2,u=r.getClientOffset().y-i.top;a<s&&u<o||a>s&&u>o||(t(a,s),e.index=s)}}}}),h=Object(N.a)(x,2),g=h[0].handlerId,v=h[1],S=Object(Zt.a)({type:"constructor-item",item:function(){return{index:n}},collect:function(e){return{isDrag:e.isDragging()}}}),E=Object(N.a)(S,2),k=E[0].isDrag;(0,E[1])(v(j));var I=Object(y.a)(Object(y.a)({className:"".concat(dn.a.item," ").concat(f)},!l&&!u&&{ref:j}),k&&{style:{opacity:0}});return Object(O.jsxs)("div",Object(y.a)(Object(y.a)({},I),{},{"data-handler-id":g,children:[p&&Object(O.jsx)(d.DragIcon,{type:"primary"}),Object(O.jsx)(d.ConstructorElement,{type:b,isLocked:u||l,text:m,price:i,thumbnail:a,handleClose:function(){_({type:jn,payload:o})}})]}))},pn=Object(r.memo)(mn),On=n(35),fn=n.n(On),_n=n.p+"static/media/check.7341dd32.svg",xn=function(e){var t=e.orderId;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h1",{className:"".concat(fn.a.order," text text_type_digits-large"),children:t}),Object(O.jsx)("p",{className:"".concat(fn.a.subtitle," text text_type_main-medium mb-15"),children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(O.jsx)("img",{src:_n,alt:"check-icon",className:fn.a.check}),Object(O.jsx)("p",{className:"text text_type_main-medium ".concat(fn.a.text," mb-2"),children:"\u0432\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(O.jsx)("p",{className:"text text_type_main-medium ".concat(fn.a.text," text_color_inactive"),children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},hn=Object(r.memo)(xn),gn="PLACE_ORDER_REQUEST",vn="PLACE_ORDER_SUCCESS",yn="PLACE_ORDER_FAILED",Nn="DELETE_ORDER_ID",Sn=function(e){return function(t){t({type:gn}),q(e).then((function(e){var n;t((n=e.order.number,{type:vn,id:n}))})).catch((function(){t({type:yn})}))}},En=n(46),kn=n.n(En),In=function(){var e=Object(r.useState)(!1),t=Object(N.a)(e,2),n=t[0],c=t[1],a=Se((function(e){return e.burger})).constructorItems,s=Se((function(e){return e.order})).currentOrderId,i=Se((function(e){return e.user})).currentUser,o=Object(an.a)({accept:"ingredient",drop:function(e){m({type:ln,payload:e})},collect:function(e){return{isHover:e.isOver()}}}),l=Object(N.a)(o,2),j=l[0].isHover,b=l[1],m=Ee(),p=Object(u.g)();Object(r.useEffect)((function(){m(ge())}),[m]);var f=a.find((function(e){return"bun"===e.type})),_=a.filter((function(e){return"bun"!==e.type})),x=Object(r.useCallback)((function(e,t){var n,r=a,c=_[e],s=on()(_,{$splice:[[e,1],[t,0,c]]}),i=(n=r.filter((function(e){return"bun"===e.type}))).concat.apply(n,Object(De.a)(s));m({type:bn,payload:i})}),[a,m,_]),h=_.map((function(e,t){return Object(O.jsx)(pn,{data:e,index:t,moveItem:x},e.uuid)})),g=Object(r.useMemo)((function(){if(a.length)return a.reduce((function(e,t){return e+t.price}),0)}),[a]);return Object(O.jsxs)("div",{className:"".concat(kn.a.container," ").concat(j?kn.a.bordered:""),ref:b,children:[n&&s&&Object(O.jsx)(Nt,{handleClose:function(){c(!1),m({type:Nn})},heading:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437",children:Object(O.jsx)(hn,{orderId:s})}),f&&Object(O.jsx)(pn,{data:f,headItem:!0,index:999,moveItem:x}),_.length>0&&Object(O.jsx)("div",{className:kn.a.items,children:h}),f&&Object(O.jsx)(pn,{data:f,tailItem:!0,index:999,moveItem:x}),a.length>0&&Object(O.jsxs)("div",{className:"".concat(kn.a.price," pl-4 pr-4"),children:[Object(O.jsx)("p",{className:"text text_type_digits-medium",children:g}),Object(O.jsx)(d.CurrencyIcon,{type:"primary"}),Object(O.jsx)(d.Button,{type:"primary",size:"large",onClick:function(){if(i){var e={ingredients:a.map((function(e){return e._id}))};m(Sn(e)),c(!0)}else p.push("/login")},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})},wn=Object(r.memo)(In),Rn=function(){return Object(O.jsx)(Mt,{title:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0411\u0443\u0440\u0433\u0435\u0440",children:Object(O.jsxs)(Xt.a,{backend:Qt.a,children:[Object(O.jsx)(cn,{}),Object(O.jsx)(wn,{})]})})},Cn=Object(r.memo)(Rn),Tn=n(21),Pn=n.n(Tn),Un=function(e){var t=e.withoutModal,n=e.data;if(!n)return null;var r,c=n.name,a=n.status,s=n.fullIngredients,i=n.price,o=n.parsedTime,u=n.number;switch(a){case"created":r={color:"white",message:"\u0421\u043e\u0437\u0434\u0430\u043d"};break;case"pending":r={color:"white",message:"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f"};break;case"done":r={message:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"};break;default:r={message:"\u0421\u043e\u0437\u0434\u0430\u043d"}}return Object(O.jsxs)("div",{className:Pn.a.container,style:t?{marginBottom:"40px"}:{},children:[t&&Object(O.jsxs)("p",{className:"text text_type_digits-default",style:{textAlign:"center"},children:["#",u]}),Object(O.jsx)("h3",{className:"mt-5 mb-5 text text_type_main-medium",children:c}),Object(O.jsx)("p",{className:"".concat(Pn.a.ready," text text_type_main-default mb-10"),style:{color:r.color},children:r.message}),Object(O.jsx)("p",{className:"mt-5 mb-5 text text_type_main-medium",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(O.jsx)("div",{className:"".concat(Pn.a.list," mb-10"),children:s.map((function(e,t){return Object(O.jsxs)("div",{className:Pn.a.ingredient,children:[Object(O.jsxs)("div",{className:Pn.a.ingredient_title,children:[Object(O.jsx)("div",{className:Pn.a.image,style:{backgroundImage:"url(".concat(e.image_large,")")}}),Object(O.jsx)("p",{className:"".concat(Pn.a.ingredient_name," text text_type_main-default"),children:e.name})]}),Object(O.jsxs)("div",{className:Pn.a.price,children:[Object(O.jsxs)("span",{className:"text text_type_digits-default",children:["1 x ",e.price]}),Object(O.jsx)(d.CurrencyIcon,{type:"primary"})]})]},e._id+t)}))}),Object(O.jsxs)("div",{className:Pn.a.ingredient,children:[Object(O.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:o}),Object(O.jsxs)("div",{className:Pn.a.price,children:[Object(O.jsx)("span",{className:"text text_type_digits-default",children:i}),Object(O.jsx)(d.CurrencyIcon,{type:"primary"})]})]})]})},Dn=Object(r.memo)(Un),An=function(){var e=Ee(),t=Object(u.i)().orderId,n=Se((function(e){return e.ingredients})).ingredientsList,c=Se((function(e){return e.wsFeed})).ordersInfo,a=null===c||void 0===c?void 0:c.orders.find((function(e){return e._id===t})),s=a?function(e,t){var n=Object(y.a)(Object(y.a)({},e),{images:[],price:0,fullIngredients:[],parsedTime:""});return e.ingredients.forEach((function(e){var r=t.find((function(t){return t._id===e}));r&&(n.fullIngredients.push(r),n.images.push(r.image_large),n.price+=r.price,n.parsedTime=Me(n.createdAt))})),n}(a,n):a;return Object(r.useEffect)((function(){return e({type:Ct}),function(){e({type:Dt})}}),[e]),c&&n?Object(O.jsx)(O.Fragment,{children:a?Object(O.jsx)("div",{className:"mt-20",children:Object(O.jsx)(Dn,{data:s,withoutModal:!0})}):Object(O.jsx)(it,{})}):Object(O.jsx)(we,{})},Fn=Object(r.memo)(An);var Ln=function(){var e=Object(u.h)(),t=Object(u.g)(),n=Ee(),c=("PUSH"===t.action||"REPLACE"===t.action)&&e.state&&e.state.background,a=e.state&&e.state.ingredient,s=e.state&&e.state.order;return Object(r.useEffect)((function(){n(Rt())}),[n]),Object(O.jsxs)("div",{className:o.a.app,id:"app",children:[Object(O.jsx)(g,{}),Object(O.jsxs)("main",{className:o.a.main,children:[Object(O.jsxs)(u.d,{location:c||e,children:[Object(O.jsx)(u.b,{path:"/login",children:Object(O.jsx)(Ce,{})}),Object(O.jsx)(u.b,{path:"/register",children:Object(O.jsx)(nt,{})}),Object(O.jsx)(u.b,{path:"/forgot-password",children:Object(O.jsx)(ct,{})}),Object(O.jsx)(u.b,{path:"/reset-password",children:Object(O.jsx)(st,{})}),Object(O.jsx)(u.b,{exact:!0,path:"/profile/orders/:orderId",children:Object(O.jsx)(Fn,{})}),Object(O.jsx)(lt,{path:"/profile",children:Object(O.jsx)(et,{})}),Object(O.jsx)(u.b,{path:"/",exact:!0,children:Object(O.jsx)(Cn,{})}),Object(O.jsx)(u.b,{path:"/feed",exact:!0,children:Object(O.jsx)(Jt,{})}),Object(O.jsx)(u.b,{path:"/ingredients/:ingredientId",children:Object(O.jsx)(xt,{})}),Object(O.jsx)(u.b,{path:"/feed/:orderId",children:Object(O.jsx)(Fn,{})}),Object(O.jsx)(u.b,{path:"*",children:Object(O.jsx)(it,{})})]}),c&&Object(O.jsxs)(u.d,{children:[Object(O.jsx)(u.b,{path:"/ingredients/:ingredientId",children:Object(O.jsx)(Nt,{heading:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",children:Object(O.jsx)(ft,{ingredient:a})})}),Object(O.jsx)(u.b,{path:"/feed/:orderId",children:Object(O.jsx)(Nt,{heading:"#".concat(null===s||void 0===s?void 0:s.number),headingType:"digits",slim:!0,children:Object(O.jsx)(Dn,{data:s})})}),Object(O.jsx)(u.b,{path:"/profile/orders/:orderId",children:Object(O.jsx)(Nt,{heading:"#".concat(null===s||void 0===s?void 0:s.number),headingType:"digits",slim:!0,children:Object(O.jsx)(Dn,{data:s})})})]})]})]})},qn=n(25),Mn=n(104),Gn={ingredientsRequest:!1,ingredientsFailed:!1,ingredientsList:[],currentIngredient:null},Wn={currentOrderRequest:!1,currentOrderFailed:!1,currentOrderId:null},Bn={constructorItems:[]},zn={currentUser:null,userRegisterRequest:!1,userRegisterFailed:!1,userLoginRequest:!1,userLoginFailed:!1,userLogoutRequest:!1,userLogoutFailed:!1,resetPasswordRequest:!1,resetPasswordSuccess:!1,resetPasswordFailed:!1,updatePasswordRequest:!1,updatePasswordSuccess:!1,updatePasswordFailed:!1,updateProfileRequest:!1,updateProfileSuccess:!1,updateProfileFailed:!1},Hn={wsConnected:!1,error:null,ordersInfo:null},Jn={wsConnected:!1,error:null,ordersInfo:null},Qn=Object(qn.b)({ingredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case St:return Object(y.a)(Object(y.a)({},e),{},{ingredientsFailed:!1,ingredientsRequest:!0});case Et:return Object(y.a)(Object(y.a)({},e),{},{ingredientsRequest:!1,ingredientsFailed:!1,ingredientsList:t.data});case kt:return Object(y.a)(Object(y.a)({},e),{},{ingredientsRequest:!1,ingredientsFailed:!0,ingredientsList:[]});case It:return Object(y.a)(Object(y.a)({},e),{},{currentIngredient:t.ingredient});case wt:return Object(y.a)(Object(y.a)({},e),{},{currentIngredient:null});default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case gn:return Object(y.a)(Object(y.a)({},e),{},{currentOrderRequest:!0});case yn:return Object(y.a)(Object(y.a)({},e),{},{currentOrderRequest:!1,currentOrderId:null,currentOrderFailed:!0});case vn:return Object(y.a)(Object(y.a)({},e),{},{currentOrderRequest:!1,currentOrderFailed:!1,currentOrderId:t.id});case Nn:return Object(y.a)(Object(y.a)({},e),{},{currentOrderId:null});default:return e}},burger:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ln:if(t.payload.uuid=String(t.payload._id+Math.random()),"bun"===t.payload.type){var n=e.constructorItems.filter((function(e){return"bun"!==e.type}));return Object(y.a)(Object(y.a)({},e),{},{constructorItems:[].concat(Object(De.a)(n),[t.payload,t.payload])})}return Object(y.a)(Object(y.a)({},e),{},{constructorItems:[].concat(Object(De.a)(e.constructorItems),[t.payload])});case jn:var r=Object(De.a)(e.constructorItems);return r.splice(r.findIndex((function(e){return e._id===t.payload})),1),Object(y.a)(Object(y.a)({},e),{},{constructorItems:Object(De.a)(r)});case bn:return Object(y.a)(Object(y.a)({},e),{},{constructorItems:Object(De.a)(t.payload)});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re:return Object(y.a)(Object(y.a)({},e),{},{resetPasswordRequest:!0,resetPasswordSuccess:!1,resetPasswordFailed:!1});case ae:return Object(y.a)(Object(y.a)({},e),{},{resetPasswordRequest:!1,resetPasswordSuccess:!1,resetPasswordFailed:!0});case ce:return Object(y.a)(Object(y.a)({},e),{},{resetPasswordRequest:!1,resetPasswordFailed:!1,resetPasswordSuccess:!0});case se:return Object(y.a)(Object(y.a)({},e),{},{resetPasswordSuccess:!1});case ie:return Object(y.a)(Object(y.a)({},e),{},{updatePasswordRequest:!0,updatePasswordSuccess:!1,updatePasswordFailed:!1});case ue:return Object(y.a)(Object(y.a)({},e),{},{updatePasswordRequest:!1,updatePasswordSuccess:!1,updatePasswordFailed:!0});case oe:return Object(y.a)(Object(y.a)({},e),{},{updatePasswordRequest:!1,updatePasswordFailed:!1,updatePasswordSuccess:!0});case de:return Object(y.a)(Object(y.a)({},e),{},{updatePasswordSuccess:!1});case X:return Object(y.a)(Object(y.a)({},e),{},{userRegisterFailed:!1,userRegisterRequest:!0});case K:return Object(y.a)(Object(y.a)({},e),{},{userRegisterRequest:!1,currentUser:null,userRegisterFailed:!0});case V:return Object(y.a)(Object(y.a)({},e),{},{userRegisterRequest:!1,userRegisterFailed:!1,currentUser:t.user});case Z:return Object(y.a)(Object(y.a)({},e),{},{userLoginFailed:!1,userLoginRequest:!0});case $:return Object(y.a)(Object(y.a)({},e),{},{userLoginRequest:!1,userLoginFailed:!0,currentUser:null});case Y:return Object(y.a)(Object(y.a)({},e),{},{userLoginRequest:!1,userLoginFailed:!1,currentUser:t.user});case ee:return Object(y.a)(Object(y.a)({},e),{},{userLogoutRequest:!0});case ne:return Object(y.a)(Object(y.a)({},e),{},{userLogoutRequest:!1,userLogoutFailed:!0});case te:return Object(y.a)(Object(y.a)({},e),{},{userLogoutRequest:!1,userLogoutFailed:!1,currentUser:null});case le:return Object(y.a)(Object(y.a)({},e),{},{updateProfileRequest:!0,updateProfileFailed:!1,updateProfileSuccess:!1});case be:return Object(y.a)(Object(y.a)({},e),{},{updateProfileRequest:!1,updateProfileSuccess:!1,updateProfileFailed:!0});case je:return Object(y.a)(Object(y.a)({},e),{},{updateProfileRequest:!1,updateProfileFailed:!1,updateProfileSuccess:!0,currentUser:t.user});default:return e}},wsFeed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Tt:return Object(y.a)(Object(y.a)({},e),{},{error:void 0,wsConnected:!1});case Pt:return Object(y.a)(Object(y.a)({},e),{},{error:void 0,wsConnected:!0});case Ut:return Object(y.a)(Object(y.a)({},e),{},{error:t.payload,wsConnected:!1});case Dt:return Object(y.a)(Object(y.a)({},e),{},{error:void 0,wsConnected:!1});case At:return Object(y.a)(Object(y.a)({},e),{},{ordersInfo:t.payload});default:return e}},wsAuthFeed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Qe:return Object(y.a)(Object(y.a)({},e),{},{error:void 0,wsConnected:!1});case Xe:return Object(y.a)(Object(y.a)({},e),{},{error:void 0,wsConnected:!0});case Ve:return Object(y.a)(Object(y.a)({},e),{},{error:t.payload,wsConnected:!1});case Ke:return Object(y.a)(Object(y.a)({},e),{},{error:void 0,wsConnected:!1});case Ze:return Object(y.a)(Object(y.a)({},e),{},{ordersInfo:t.payload});default:return e}}}),Xn=["success"],Vn=function(e,t,n){return function(r){var c=null;return function(a){return function(s){var i=r.dispatch,o=s.type,u=s.payload,d=t.wsInit,l=t.onOpen,j=t.onError,b=t.onMessage,m=t.onClose,p=t.wsSendMessage,O=t.wsStop,f=n?U("token"):null;if(o===d&&(c=f?new WebSocket("".concat(e,"?token=").concat(f)):new WebSocket(e)),c){if(c.onopen=function(){i({type:l})},c.onerror=function(e){i({type:j,payload:e})},c.onmessage=function(e){var t=e.data,n=JSON.parse(t),r=(n.success,Object(ot.a)(n,Xn));i({type:b,payload:r})},c.onclose=function(){i({type:m})},c&&o===p){var _=u.message;c.send(JSON.stringify(_))}c&&o===O&&c.close(1e3,"socket closed")}a(s)}}}},Kn={wsInit:Ct,wsStop:Tt,onOpen:Pt,onClose:Dt,onError:Ut,onMessage:At,wsSendMessage:"WS_SEND_MESSAGE"},Zn={wsInit:Je,wsStop:Qe,onOpen:Xe,onClose:Ke,onError:Ve,onMessage:Ze,wsSendMessage:"WS_SEND_MESSAGE_AUTH"},Yn=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||qn.c)(Object(qn.a)(Mn.a,Vn("wss://norma.nomoreparties.space/orders/all",Kn),Vn("wss://norma.nomoreparties.space/orders",Zn,!0))),$n=Object(qn.d)(Qn,Yn);s.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(Ne.a,{store:$n,children:Object(O.jsx)(l.a,{basename:"/react-router",children:Object(O.jsx)(Ln,{})})})}),document.getElementById("root"))},20:function(e,t,n){e.exports={container:"profile_container__2BbXp",menu:"profile_menu__xxfx5",navigation:"profile_navigation__fWhM0",list:"profile_list__2lI8E",list_item:"profile_list_item__1957-",link:"profile_link__1-1p8",link_active:"profile_link_active__F7ryI",form_container:"profile_form_container__wsgWg",form:"profile_form__3yKlC"}},21:function(e,t,n){e.exports={container:"order-details-item_container__2j1ep",list:"order-details-item_list__2BCpc",ready:"order-details-item_ready__4WjWN",ingredient:"order-details-item_ingredient__1IT-C",ingredient_title:"order-details-item_ingredient_title__21Qgn",ingredient_name:"order-details-item_ingredient_name__XB_NP",image:"order-details-item_image__2D2wL",price:"order-details-item_price__1yrDD"}},23:function(e,t,n){e.exports={container:"orders-list-item_container__64U9j",credentials:"orders-list-item_credentials__1mHA5",ingredients:"orders-list-item_ingredients__36tC_",price:"orders-list-item_price__1vIiO",images:"orders-list-item_images__2PnVw",image:"orders-list-item_image__etwhK",image_excess:"orders-list-item_image_excess__3ry1Z"}},26:function(e,t,n){e.exports={details:"ingredient-details_details__uP6-A",image:"ingredient-details_image__H2-xP",nutrients:"ingredient-details_nutrients__3DmXA",subtitle:"ingredient-details_subtitle__22Z-d",text:"ingredient-details_text__1jgQH"}},28:function(e,t,n){e.exports={container:"auth-form_container__m7eNv",form:"auth-form_form__1d4QB",link:"auth-form_link__a660i"}},33:function(e,t,n){e.exports={container:"modal_container__3GddM",header:"modal_header__2iX3r",heading:"modal_heading__3ro6V",order:"modal_order__FFKoR",check:"modal_check__2tXHp",text:"modal_text__1Kop1",details:"modal_details__2vl82",image:"modal_image__nuFwr",nutrients:"modal_nutrients__8PBW7"}},34:function(e,t,n){e.exports={glow:"orders-info_glow__QZI6k",ready:"orders-info_ready__3eBjg",list:"orders-info_list__19AXP"}},35:function(e,t,n){e.exports={order:"oder-details_order__3SJRp",subtitle:"oder-details_subtitle__GA6Wg",check:"oder-details_check__2R33x",text:"oder-details_text__2Q7iS"}},44:function(e,t,n){e.exports={container:"app-header_container__2ER_-",navigation:"app-header_navigation__cmFMn",list:"app-header_list__q5yDi",logo:"app-header_logo__zVEfY"}},45:function(e,t,n){e.exports={container:"burger-ingredients-item_container__1Q9aJ",price:"burger-ingredients-item_price__Mcqf0",title:"burger-ingredients-item_title__mOAw6",counter:"burger-ingredients-item_counter__2cM8u"}},46:function(e,t,n){e.exports={container:"burger-constructor_container__332QY",bordered:"burger-constructor_bordered__3eru0",items:"burger-constructor_items__2egos",price:"burger-constructor_price__Q5cGy"}},55:function(e,t,n){e.exports={tabs:"burger-ingredients_tabs__1yNyE",sections:"burger-ingredients_sections__2-wIo",items:"burger-ingredients_items__ff6d6"}},74:function(e,t,n){e.exports={app:"app_app__M9MMq",main:"app_main__3yfFw"}},75:function(e,t,n){e.exports={link:"header-item_link__5dJ7M",link_active:"header-item_link_active__3goST"}},78:function(e,t,n){e.exports={container:"loader_container__oUJCN",loader:"loader_loader__31U88",rotate:"loader_rotate__2RGOz"}},98:function(e,t,n){e.exports={sections:"orders-list_sections__pMbmh"}},99:function(e,t,n){e.exports={container:"modal-overlay_container__2nzUA"}}},[[185,1,2]]]);
//# sourceMappingURL=main.cf5dbba0.chunk.js.map